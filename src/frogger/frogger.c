#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <fcntl.h>
#include <stdio.h>
#include "frogger.h"
#include "../common/avdc.h"
#include "../common/utils.h"
#include "../common/gdp.h"

uint8_t avdc_init_str[] = { 
	/*0xA8*/0xF8, // 16 SCAN LINES PER CHAR ROW
	0x3E, 
	0xBF, 
	0x05,
	0x90, // ACTIVE CHAR ROWS PER SCREEN = 16 + 1
	0x83, 
	0x0B, 
	0xEA, 
	0x00, 
	0x30 
};

uint8_t glyphs[][16] =
{
	{ 0x00, 0x50, 0x10, 0x10, 0x50, 0x54, 0x54, 0x54, 0x54, 0x54, 0x54, 0x50, 0x10, 0x10, 0x50, 0x00 },
	{ 0x00, 0x55, 0x11, 0x11, 0x55, 0x55, 0x05, 0x05, 0x05, 0x05, 0x55, 0x55, 0x11, 0x11, 0x55, 0x00 },
	{ 0x00, 0x01, 0x01, 0x01, 0x55, 0x11, 0x15, 0x15, 0x15, 0x15, 0x11, 0x55, 0x01, 0x01, 0x01, 0x00 },
	{ 0x00, 0x00, 0x54, 0x14, 0x55, 0x14, 0x54, 0x14, 0x14, 0x54, 0x14, 0x55, 0x14, 0x54, 0x00, 0x00 },
	{ 0x00, 0x00, 0x40, 0x54, 0x54, 0x51, 0x55, 0x55, 0x55, 0x55, 0x51, 0x54, 0x54, 0x40, 0x00, 0x00 },
	{ 0x00, 0x00, 0x05, 0x55, 0x41, 0x50, 0x50, 0x50, 0x50, 0x50, 0x50, 0x41, 0x55, 0x05, 0x00, 0x00 },
	{ 0x00, 0x00, 0x40, 0x55, 0x54, 0x05, 0x45, 0x45, 0x45, 0x45, 0x05, 0x54, 0x55, 0x40, 0x00, 0x00 },
	{ 0x00, 0x00, 0x05, 0x15, 0x15, 0x50, 0x14, 0x14, 0x14, 0x14, 0x50, 0x15, 0x15, 0x05, 0x00, 0x00 },
	{ 0x00, 0x54, 0x54, 0x54, 0x40, 0x50, 0x05, 0x44, 0x44, 0x05, 0x50, 0x40, 0x54, 0x54, 0x54, 0x00 },
	{ 0x00, 0x05, 0x05, 0x05, 0x00, 0x55, 0x51, 0x44, 0x44, 0x51, 0x55, 0x00, 0x05, 0x05, 0x05, 0x00 },
	{ 0x00, 0x00, 0x54, 0x54, 0x40, 0x55, 0x41, 0x05, 0x05, 0x41, 0x55, 0x40, 0x54, 0x54, 0x00, 0x00 },
	{ 0x00, 0x00, 0x05, 0x05, 0x00, 0x05, 0x15, 0x55, 0x55, 0x15, 0x05, 0x00, 0x05, 0x05, 0x00, 0x00 },
	{ 0x00, 0x00, 0x50, 0x50, 0x00, 0x50, 0x54, 0x55, 0x55, 0x54, 0x50, 0x00, 0x50, 0x50, 0x00, 0x00 },
	{ 0x00, 0x00, 0x15, 0x15, 0x01, 0x55, 0x41, 0x50, 0x50, 0x41, 0x55, 0x01, 0x15, 0x15, 0x00, 0x00 },
	{ 0x00, 0x50, 0x50, 0x50, 0x00, 0x55, 0x45, 0x11, 0x11, 0x45, 0x55, 0x00, 0x50, 0x50, 0x50, 0x00 },
	{ 0x00, 0x15, 0x15, 0x15, 0x01, 0x05, 0x50, 0x11, 0x11, 0x50, 0x05, 0x01, 0x15, 0x15, 0x15, 0x00 },
	{ 0x00, 0x00, 0x50, 0x54, 0x01, 0x41, 0x41, 0x41, 0x41, 0x41, 0x41, 0x01, 0x54, 0x50, 0x00, 0x00 },
	{ 0x00, 0x00, 0x01, 0x15, 0x15, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x15, 0x15, 0x01, 0x00, 0x00 },
	{ 0x00, 0x55, 0x55, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x55, 0x55, 0x00 },
	{ 0x00, 0x40, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x40, 0x00 },
	{ 0x00, 0x15, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x15, 0x00 },
	{ 0x00, 0x55, 0x55, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x55, 0x55, 0x00 },
	{ 0x00, 0x40, 0x10, 0x04, 0x14, 0x01, 0x41, 0x01, 0x15, 0x01, 0x41, 0x04, 0x44, 0x10, 0x40, 0x00 },
	{ 0x00, 0x55, 0x00, 0x00, 0x14, 0x00, 0x41, 0x00, 0x14, 0x00, 0x41, 0x00, 0x44, 0x11, 0x55, 0x00 },
	{ 0x00, 0x55, 0x10, 0x04, 0x44, 0x41, 0x11, 0x11, 0x11, 0x01, 0x41, 0x04, 0x04, 0x11, 0x55, 0x00 },
	{ 0x00, 0x01, 0x04, 0x10, 0x10, 0x41, 0x40, 0x44, 0x44, 0x44, 0x41, 0x11, 0x10, 0x04, 0x01, 0x00 },
	{ 0x00, 0x00, 0x40, 0x40, 0x00, 0x40, 0x54, 0x55, 0x55, 0x54, 0x40, 0x00, 0x40, 0x40, 0x00, 0x00 },
	{ 0x00, 0x15, 0x05, 0x50, 0x05, 0x10, 0x51, 0x04, 0x04, 0x51, 0x10, 0x05, 0x50, 0x05, 0x15, 0x00 },
	{ 0x00, 0x00, 0x40, 0x55, 0x40, 0x11, 0x14, 0x41, 0x41, 0x14, 0x11, 0x40, 0x55, 0x40, 0x00, 0x00 },
	{ 0x00, 0x15, 0x05, 0x00, 0x01, 0x04, 0x05, 0x14, 0x14, 0x05, 0x04, 0x01, 0x00, 0x05, 0x15, 0x00 },
	{ 0x00, 0x14, 0x50, 0x50, 0x40, 0x40, 0x54, 0x55, 0x55, 0x54, 0x40, 0x40, 0x50, 0x50, 0x14, 0x00 },
	{ 0x00, 0x00, 0x00, 0x50, 0x05, 0x10, 0x51, 0x04, 0x04, 0x51, 0x10, 0x05, 0x50, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, // spc
	{ 0x00, 0x14, 0x50, 0x55, 0x40, 0x11, 0x14, 0x41, 0x41, 0x14, 0x11, 0x40, 0x55, 0x50, 0x14, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x01, 0x04, 0x05, 0x14, 0x14, 0x05, 0x04, 0x01, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x40, 0x50, 0x10, 0x00, 0x00, 0x00, 0x00, 0x10, 0x50, 0x40, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x01, 0x00, 0x50, 0x14, 0x41, 0x41, 0x14, 0x50, 0x00, 0x01, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x50, 0x40, 0x01, 0x05, 0x10, 0x10, 0x05, 0x01, 0x40, 0x50, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x50, 0x54, 0x00, 0x10, 0x40, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x14, 0x01, 0x44, 0x55, 0x00, 0x10, 0x41, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x54, 0x01, 0x00, 0x00, 0x44, 0x15, 0x50, 0x50, 0x01, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x10, 0x00, 0x01, 0x41, 0x40, 0x14, 0x01, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x01, 0x10, 0x01, 0x10, 0x44, 0x55, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x40, 0x11, 0x14, 0x00, 0x00, 0x00, 0x10, 0x14, 0x01, 0x45, 0x15, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x05, 0x10, 0x51, 0x00, 0x14, 0x44, 0x00, 0x54, 0x04, 0x01, 0x40, 0x14, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x45, 0x51, 0x00, 0x55, 0x00, 0x00, 0x40, 0x14, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x40, 0x51, 0x54, 0x40, 0x15, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x05, 0x50, 0x01, 0x40, 0x50, 0x54, 0x00, 0x54, 0x04, 0x01, 0x40, 0x14, 0x00 },
	{ 0x00, 0x00, 0x50, 0x05, 0x40, 0x14, 0x11, 0x44, 0x55, 0x00, 0x55, 0x00, 0x00, 0x40, 0x14, 0x00 },
	{ 0x54, 0x45, 0x40, 0x14, 0x11, 0x01, 0x00, 0x44, 0x55, 0x40, 0x15, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x55, 0x00, 0x40, 0x50, 0x40, 0x41, 0x00, 0x14, 0x14, 0x51, 0x50, 0x44, 0x11, 0x55, 0x00 },
	{ 0x00, 0x55, 0x00, 0x50, 0x44, 0x54, 0x55, 0x44, 0x45, 0x15, 0x51, 0x01, 0x44, 0x11, 0x55, 0x00 },
	{ 0x00, 0x55, 0x00, 0x15, 0x45, 0x55, 0x55, 0x55, 0x55, 0x54, 0x15, 0x00, 0x44, 0x11, 0x55, 0x00 },
	{ 0x00, 0x55, 0x00, 0x04, 0x14, 0x04, 0x05, 0x00, 0x51, 0x51, 0x15, 0x15, 0x44, 0x11, 0x55, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x15, 0x55, 0x55, 0x55, 0x54, 0x50, 0x55, 0x00, 0x00, 0x00 },
	{ 0x00, 0x50, 0x04, 0x44, 0x55, 0x15, 0x55, 0x54, 0x54, 0x55, 0x55, 0x54, 0x41, 0x50, 0x40, 0x00 },
	{ 0x00, 0x00, 0x55, 0x55, 0x55, 0x55, 0x00, 0x55, 0x55, 0x55, 0x55, 0x00, 0x00, 0x41, 0x00, 0x00 },
	{ 0x00, 0x05, 0x10, 0x11, 0x55, 0x54, 0x55, 0x15, 0x15, 0x55, 0x55, 0x15, 0x41, 0x05, 0x01, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0x54, 0x55, 0x55, 0x55, 0x15, 0x05, 0x55, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x11, 0x04, 0x00, 0x40, 0x00, 0x11, 0x04, 0x00, 0x44, 0x10, 0x00, 0x11, 0x04, 0x00 },
	{ 0x00, 0x11, 0x04, 0x00, 0x00, 0x04, 0x01, 0x00, 0x00, 0x44, 0x10, 0x00, 0x00, 0x00, 0x11, 0x04 }
};

int main() {
	avdc_init_ex(AVDC_MODE_CUSTOM, 0xC4, avdc_init_str);
	for (uint8_t i = 0; i < 62; i++) {
		avdc_define_glyph(i, glyphs[i]);
	}
	avdc_write_glyphs_at_pointer_pos(1, 35, 61, "\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D", 0);
	avdc_write_glyphs_at_pointer_pos(2, 35, 61, "\x3C\x3D\x37\x38\x39\x3A\x3B\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D     \x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x2C\x30\x31\x32 \x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D     \x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D     \x3C\x3D", 0);
	avdc_write_glyphs_at_pointer_pos(3, 35, 61, "   \x16\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x18\x19    \x27\x28\x29\x2A\x2B\x2B\x2B\x2B\x2B\x2C\x2D\x2E\x2F      \x16\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x18\x19          ", 0);
	avdc_write_glyphs_at_pointer_pos(4, 35, 61, "\x1A\x1B\x1C\x1D \x1A\x1B\x1C\x1D        \x1E\x1F\x21\x22 \x1E\x1F\x21\x22           \x1A\x1B\x1C\x1D \x1A\x1B\x1C\x1D                      \x1A\x1B\x1C\x1D \x1A\x1B\x1C\x1D          ", 0);
	avdc_write_glyphs_at_pointer_pos(5, 35, 61, "         \x16\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x18\x19                \x16\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x17\x18\x19", 0);
	avdc_write_glyphs_at_pointer_pos(6, 35, 61, "\x17\x17\x17\x17\x17\x18\x19       \x16\x17\x17\x17\x17\x17\x17\x17\x17\x18\x19        \x16\x17\x17\x17\x17\x17\x17\x17\x17\x18\x19          \x16\x17\x17\x17\x17\x17\x17\x17\x17\x18\x19              \x16\x17\x17\x17\x17\x17\x17\x17\x17\x18\x19", 0);
	avdc_write_glyphs_at_pointer_pos(7, 35, 61, "     \x1A\x1B\x1C\x1D \x1A\x1B\x1C\x1D \x1A\x1B\x1C\x1D     \x1E\x1F\x21\x22 \x1E\x1F\x21\x22 \x1E\x1F\x21\x22   \x23\x24\x25\x26 \x23\x24\x25\x26 \x23\x24\x25\x26                                                   ", 0);
	avdc_write_glyphs_at_pointer_pos(8, 35, 61, "\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D", 0);
	avdc_write_glyphs_at_pointer_pos(9, 35, 61, "  \x10\x11\x12\x13 \x14\x15                  \x10\x11\x12\x13 \x14\x15      \x10\x11\x12\x13 \x14\x15        \x10\x11\x12\x13 \x14\x15    \x10\x11\x12\x13 \x14\x15          ", 0);	
	avdc_write_glyphs_at_pointer_pos(10, 35, 61, "\x08\x09\x0A\x0B   \x08\x09\x0A\x0B               \x08\x09\x0A\x0B    \x08\x09\x0A\x0B                                        \x08\x09\x0A\x0B         \x08\x09\x0A\x0B        \x08\x09\x0A\x0B ", 0);	
	avdc_write_glyphs_at_pointer_pos(11, 35, 61, "\x06\x07          \x04\x05\x06\x07                \x04\x05\x06\x07  \x04\x05\x06\x07                  \x04\x05\x06\x07    \x04\x05\x06\x07    \x04\x05\x06\x07         \x04\x05\x06\x07        \x04\x05\x06\x07", 0);	
	avdc_write_glyphs_at_pointer_pos(12, 35, 61, "   \x00\x01\x02\x03           \x00\x01\x02\x03     \x00\x01\x02\x03                    \x00\x01\x02\x03                     \x00\x01\x02\x03    \x00\x01\x02\x03          \x00\x01\x02\x03  \x00\x01\x02\x03        \x00\x01\x02\x03", 0);	
	avdc_write_glyphs_at_pointer_pos(13, 35, 61, "\x0C\x0D\x0E\x0F   \x0C\x0D\x0E\x0F        \x0C\x0D\x0E\x0F          \x0C\x0D\x0E\x0F    \x0C\x0D\x0E\x0F             \x0C\x0D\x0E\x0F             \x0C\x0D\x0E\x0F  \x0C\x0D\x0E\x0F       \x0C\x0D\x0E\x0F     \x0C\x0D\x0E\x0F         \x0C\x0D\x0E\x0F", 0);	
	avdc_write_glyphs_at_pointer_pos(14, 35, 61, "\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D", 0);
	avdc_write_glyphs_at_pointer_pos(15, 35, 61, "\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D\x3C\x3D", 0);
	while (!kbhit());
	avdc_done();
	return 0;
}